<app-header></app-header>
<main>
    <div class="feed-container">
        <div *ngFor="let post of posts" class="post">
            <div class="post-header" (click)="goToProfile(post.Utilisateur.id)">
                <strong>{{ post.Utilisateur.prenom }} {{ post.Utilisateur.nom }}</strong>
                <small>{{ post.Utilisateur.username }}</small>
            </div>

            <div class="post-body">
                <p>{{ post.content }}</p>
            </div>

            <!-- Actions dans le même scope -->
            <div class="post-actions">
                <button (click)="like(post.id)">❤️ Like</button>
                <button (click)="toggleComments(post.id)">💬 Comments</button>
            </div>

            <!-- Commentaire -->
            <div *ngIf="showingComments[post.id]">
                <div *ngFor="let c of comments[post.id]">
                    <p><strong>{{ c.Utilisateur.prenom }}:</strong> {{ c.contenu }}</p>
                </div>
                <input [(ngModel)]="newComment[post.id]" placeholder="Votre commentaire">
                <button (click)="addComment(post.id)">Envoyer</button>
            </div>
        </div>
    </div>

    <!-- Champ de publication -->
    <div class="post-input-bar">
        <textarea [(ngModel)]="newContent" placeholder="Exprimez-vous..."></textarea>
        <button (click)="publish()">Publier</button>
    </div>
</main>

<app-footer></app-footer>